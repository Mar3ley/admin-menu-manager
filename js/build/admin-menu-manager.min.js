/*! admin-menu-manager - v1.0.0 - 2015-03-31 */

"use strict";!function(a){a(function(){function b(b,c){var d,e=c.item.find("a").attr("href"),f=c.item.index(),g=c.item.is(".wp-menu-separator"),h=c.item.attr("data-amm-separator"),i=[c.item.index()];if(e&&(e=e.replace("jetpack_modules","jetpack")),c.item.parent(".wp-submenu").length>0){f=f>0?--f:0;var j=a("#adminmenu > li").index(c.item.parents("li"));i=[j,f]}if(c.item.index()>0&&c.item.removeClass("wp-first-item"),c.item.parent("#adminmenu").length?g||(c.item.attr("data-amm-parent")?(c.item.addClass("menu-top"),c.item.find("a").addClass("menu-top")):(c.item.removeClass().addClass(c.item.attr("data-amm-class")).addClass("ui-sortable-handle"),c.item.find(".amm-wp-menu-name").removeClass("amm-wp-menu-name").addClass("wp-menu-name")),0==c.item.find("a div").length&&(c.item.find("a").wrapInner('<div class="wp-menu-name"></div>'),c.item.find("a").prepend('<div class="wp-menu-image dashicons-before dashicons-admin-generic"><br></div>')),c.item.find(".wp-menu-arrow").show(),c.item.find(".wp-menu-image").show(),c.item.find(".wp-submenu").show()):(c.item.removeClass("menu-top"),c.item.find(".menu-top").removeClass("menu-top"),c.item.find(".wp-menu-arrow").hide(),c.item.find(".wp-menu-image").hide(),c.item.find(".wp-submenu").hide(),c.item.find(".wp-menu-name").length>0&&c.item.find(".wp-menu-name").removeClass("wp-menu-name").addClass("amm-wp-menu-name")),_.each(AdminMenuManager.adminMenu,function(a,b){return a[2]&&e&&a[2]==e.split("=")[1]||g&&"wp-menu-separator"==a[4]&&a[2]==h?(d=[b],!1):void _.each(a[7],function(c,f){return c[2]&&e&&c[2]==e.split("=")[1]||g&&"wp-menu-separator"==a[4]&&a[2]==h?(d=[b,f],!1):void 0},{ui:this.ui})},{ui:c}),d&&1==d.length){var k=AdminMenuManager.adminMenu[d[0]];AdminMenuManager.adminMenu.splice(d[0],1)}else if(d&&2==d.length){var k=AdminMenuManager.adminMenu[d[0]][7][d[1]];AdminMenuManager.adminMenu[d[0]][7].splice(d[1],1)}1==i.length?(4==k.length&&(k[4]="menu-top",k[5]="",k[6]="dashicons-admin-generic"),AdminMenuManager.adminMenu.splice(i[0],0,k)):2==i.length&&(k[4]="",AdminMenuManager.adminMenu[i[0]][7].length>0?AdminMenuManager.adminMenu[i[0]][7].splice(i[1],0,k):AdminMenuManager.adminMenu[i[0]][7].push(k))}var c=!1,d=0;a("#adminmenu li:not(.wp-submenu-head)").each(function(b){a(this).attr("data-amm-class",a(this).attr("class")),a(this).attr("data-amm-index",b),a(this).hasClass("menu-top")||a(this).attr("data-amm-parent",a(this).parents("li").find("a").attr("href")),a(this).hasClass("wp-menu-separator")&&a(this).attr("data-amm-separator","separator"+ ++d)}),d>2&&a("[data-amm-separator=separator"+d+"]").attr("data-amm-separator","separator-last"),a("#admin-menu-manager-edit").click(function(d){d.preventDefault();var e=a(this).find(".wp-menu-name");if(c=!c,c?_.each(a("#adminmenu > .menu-top:not(.wp-has-submenu)"),function(b){a(b).addClass("wp-has-submenu"),a(b).hasClass("current")&&a(b).addClass("wp-has-current-submenu"),a(b).append('<ul class="wp-submenu wp-submenu-wrap"><li class="wp-submenu-head">'+a(b).find(".wp-menu-name").html()+"</li></ul>")}):_.each(a("#adminmenu > .menu-top.wp-has-submenu"),function(b){a(b).find("li").length<=1&&a(b).removeClass("wp-has-current-submenu wp-has-submenu")}),a("#adminmenuwrap ul").sortable({disabled:!c,cancel:"#admin-menu-manager-edit, #collapse-menu",connectWith:"#adminmenuwrap ul",update:b,beforeStop:function(a,b){},change:function(a,b){}}),c)e.text(AdminMenuManager.buttonSave);else{var f={action:"amm_update_menu",adminMenu:AdminMenuManager.adminMenu};a.post(ajaxurl,f,function(){e.text(AdminMenuManager.buttonSaving).fadeOut(1e3,function(){a(this).text(AdminMenuManager.buttonSaved).fadeIn().delay(1e3).fadeOut(50,function(){a(this).text(AdminMenuManager.buttonEdit).fadeIn(50)})})})}})})}(jQuery);
//# sourceMappingURL=admin-menu-manager.min.js.map
/*! admin-menu-manager - v1.0.0 - 2015-04-01 */

"use strict";!function(a){a(function(){function b(b,c){var d,e=c.item.find("a").attr("href"),f=c.item.index(),g=c.item.is(".wp-menu-separator"),h=c.item.attr("data-amm-separator"),i=[c.item.index()];if(c.item.parent(".wp-submenu").length>0){f=f>0?--f:0;var j=a("#adminmenu > li").index(c.item.parents("li"));i=[j,f]}if(c.item.index()>0&&c.item.removeClass("wp-first-item"),_.each(AdminMenuManager.adminMenu,function(a,b){return a[2]&&e&&a[2].split("=").pop()==e.split("=").pop()||g&&"wp-menu-separator"==a[4]&&a[2]==h?(d=[b],!1):void _.each(a[7],function(c,f){return c[2]&&e&&c[2].split("=").pop()==e.split("=").pop()||g&&"wp-menu-separator"==a[4]&&a[2]==h?(d=[b,f],!1):void 0},{ui:this.ui})},{ui:c}),d){var k=AdminMenuManager.adminMenu[d[0]][6];if(1==d.length){var l=AdminMenuManager.adminMenu[d[0]];AdminMenuManager.adminMenu.splice(d[0],1)}else if(2==d.length){var l=AdminMenuManager.adminMenu[d[0]][7][d[1]];AdminMenuManager.adminMenu[d[0]][7].splice(d[1],1)}}1==i.length?(l[4]="menu-top",l[5]=l[5]?l[5]:d?AdminMenuManager.adminMenu[d[0]][5]:"",l[6]=k?k:"dashicons-admin-generic",AdminMenuManager.adminMenu.splice(i[0],0,l)):2==i.length&&(l[4]="",AdminMenuManager.adminMenu[i[0]][7].length>0?AdminMenuManager.adminMenu[i[0]][7].splice(i[1],0,l):AdminMenuManager.adminMenu[i[0]][7].push(l)),c.item.parent("#adminmenu").length>0?g||(c.item.attr("data-amm-parent")?(c.item.addClass("menu-top"),c.item.find("a").addClass("menu-top")):c.item.removeClass().addClass(c.item.attr("data-amm-class")).addClass("ui-sortable-handle"),c.item.addClass(l[5]),c.item.find(".amm-wp-menu-name").removeClass("amm-wp-menu-name").addClass("wp-menu-name"),0==c.item.find("a div").length&&(c.item.find("a").wrapInner('<div class="wp-menu-name"></div>'),c.item.find("a").prepend(l[6].indexOf("dashicons")>-1?'<div class="wp-menu-image dashicons-before '+l[6]+'"><br></div>':l[6].indexOf("image/svg")>-1||l[6].indexOf("http")>-1?'<div class="wp-menu-image svg" style="background-image:url('+l[6]+') !important;"><br></div>':"div"==l[6]||"none"==l[6]?'<div class="wp-menu-image dashicons-before"><br></div>':'<div class="wp-menu-image dashicons-before dashicons-admin-generic"><br></div>')),c.item.find(".wp-menu-arrow").show(),c.item.find(".wp-menu-image").show(),c.item.find(".wp-submenu").show()):(c.item.removeClass("menu-top").removeClass(c.item.attr("class").match(/toplevel_[\w-]*\b/)),c.item.find(".menu-top").removeClass("menu-top"),c.item.find(".wp-menu-arrow").hide(),c.item.find(".wp-menu-image").hide(),c.item.find(".wp-submenu").hide(),c.item.find(".wp-menu-name").length>0&&c.item.find(".wp-menu-name").removeClass("wp-menu-name").addClass("amm-wp-menu-name"))}var c=!1,d=0;_.each(a("#adminmenu li:not(.wp-submenu-head)"),function(b,c){var e=a(b);e.attr("data-amm-class",e.attr("class")),e.hasClass("menu-top")?e.attr("data-amm-index",e.index()):(e.attr("data-amm-parent",e.parents("li").find("a").attr("href")),e.attr("data-amm-index",c)),e.hasClass("wp-menu-separator")&&e.attr("data-amm-separator","separator"+ ++d)}),d>2&&a("[data-amm-separator=separator"+d+"]").attr("data-amm-separator","separator-last"),a("#admin-menu-manager-edit").click(function(d){d.preventDefault();var e=a(this).find(".menu-top"),f=a(this).find(".wp-menu-name"),g=a(this).find(".wp-menu-image");if(c=!c,c?_.each(a("#adminmenu > .menu-top:not(.wp-has-submenu)"),function(b){var c=a(b);c.addClass("wp-has-submenu"),c.hasClass("current")&&c.addClass("wp-has-current-submenu"),c.append('<ul class="wp-submenu wp-submenu-wrap"><li class="wp-submenu-head">'+a(b).find(".wp-menu-name").html()+"</li></ul>")}):_.each(a("#adminmenu > .menu-top.wp-has-submenu"),function(b){var c=a(b);c.find("li").length<=1&&c.removeClass("wp-has-current-submenu wp-has-submenu")}),a("#adminmenuwrap ul").sortable({disabled:!c,cancel:"#admin-menu-manager-edit, #collapse-menu",connectWith:"#adminmenuwrap ul",update:b,beforeStop:function(a,b){},change:function(a,b){}}),c)g.removeClass("dashicons-edit").addClass("dashicons-yes"),f.text(AdminMenuManager.buttonSave),e.attr("title",AdminMenuManager.buttonSave);else{var h={action:"amm_update_menu",adminMenu:AdminMenuManager.adminMenu};a.post(ajaxurl,h,function(){g.removeClass("dashicons-yes").addClass("dashicons-edit"),f.text(AdminMenuManager.buttonSaving).fadeOut(1e3,function(){a(this).text(AdminMenuManager.buttonSaved).fadeIn().delay(1e3).fadeOut(50,function(){a(this).text(AdminMenuManager.buttonEdit).fadeIn(50)})})})}})})}(jQuery);
//# sourceMappingURL=admin-menu-manager.min.js.map